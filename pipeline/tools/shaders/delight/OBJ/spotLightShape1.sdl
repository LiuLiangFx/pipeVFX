3dl
############################################################################
# File automatically generated by the 3delight shader compiler.            #
# DO NOT EDIT THIS FILE !!!                                                #
############################################################################

# Compiled with 3Delight 10.0.148 linux64 (Jun 17 2013, 3e8a59) "Blade Runner"

%code 7 121
3

0
0
0
0
0
0
0
0
0
1
1
0
0
1
1
0
0
1
1
1
1
0
0
0
0
0
0
0
14
0 12 0
0 4 ""
0 1 0.00000000e+00
0 1 1.60000000e+01
0 1 1.00000000e+00
0 1 3.00000012e-01
0 1 5.89999974e-01
0 1 1.09999999e-01
0 4 "user:delight_receive_shadows"
0 4 "shader"
0 1 1.00000005e-03
0 1 3.49065840e-01
0 1 9.39692616e-01
0 10 0
10
"shadowmapname" "" 2 4 0 0 0 0
"shadowBlur" "" 2 1 0 0 0 0
"shadowSamples" "" 2 1 0 0 0 0
"__nonspecular" "" 2 1 0 0 0 0
"__nondiffuse" "" 2 1 0 0 0 0
"__category" "" 2 4 0 0 0 0
"iskeylight" "" 2 1 0 0 0 0
"rayTraceShadowSubset" "" 2 4 0 0 0 0
"__3dfm_shadowing" "" 3 1 0 0 1 0
"__3dfm_unshadowed_cl" "rgb" 3 3 0 0 1 0
0
0
0
0
0
0
0
0


3

7 42 29 

1
3 

3

1 43 30 

1
3 

3

1 44 31 

1
3 

3

1 45 30 

1
3 

3

1 46 30 

1
3 

3

7 47 29 

1
3 

3

1 48 30 

1
3 

3

7 49 29 

1
3 

3

1 50 30 

1
3 

3

4 51 30 

1
3 

0
0

0

0

0

0

1
"light"
8
19
20
18
13
14
17
9
10
2
"*L" 3 8 0 0 1 0
"*Cl" 3 3 0 0 1 0
0
0

0


0

0


0

7
1 0 0 0
1 0 0 0
1 0 0 0
1 0 0 0
3 0 0 0
9 0 0 0
2 0 0 0
10
10 0 0 0
1 0 0 0
1 0 0 0
1 0 0 0
1 0 0 0
3 0 0 0
3 0 0 0
2 0 0 0
2 0 0 0
2 0 0 0
245

9 19 30 30 30 
9 20 32 32 32 
9 58 30 30 30 
11 57 58 37 
1 53 39 
6 59 41 
9 58 30 30 32 
12 58 58 37 
132 52 58 
33 58 58 52 
173 59 57 58 53 17 18 
232 59 0 5 
174 17 18 19 53 
234 
9 56 30 30 30 
1 52 38 
9 58 30 30 30 
11 57 58 37 
9 58 30 30 32 
12 58 58 37 
135 58 58 1 
1 53 39 
1 54 40 
173 59 57 58 53 17 18 
232 59 0 139 
37 60 18 18 
68 60 60 
37 62 18 58 
30 60 62 60 
87 63 54 54 60 
9 64 32 32 32 
46 59 42 29 
232 59 0 11 
1 54 32 
200 55 36 54 
43 59 32 54 
234 
232 59 0 71 
1 55 32 
1 54 44 
2 66 17 
220 66 67 68 
188 15 65 42 30 66 67 68 28 54 43 28 28 55 28 28 28 52 28 28 28 28 28 28 
126 60 65 
24 62 33 60 
127 60 65 
24 60 34 60 
17 61 62 60 
128 62 65 
24 60 35 62 
17 50 61 60 
153 64 64 56 65 
234 
4 51 63 
25 19 64 63 
2 65 19 
2 19 65 
174 17 18 19 53 
234 

59
5 10 15 19 22 25 30 34 37 41 48 52 57 58 63 66 71 75 80 84 
88 91 94 101 105 109 112 116 120 125 130 134 138 141 145 149 150 154 157 160 
163 167 191 194 198 201 205 209 212 216 220 225 226 229 233 236 239 244 245 

%comment-3dl 7 121
4
"MacroBlocks_light"
"OQowIDMKIDAgMCAzCiA1OCAxOSAyMAo0IDMKIDAgMCAyCiA1MyA1OAo4IDIKIDAgMSAwCiA1OAoxNCAzCiAwIDAgMwogNTIgNTYgNTgKMjAgMwogMCAxIDIKIDU4IDUzIDU0CjI1IDQKIDIgMCAxCiA1OCAxOCA2MAozOCAzCiAyIDAgMwogMTcgNDQgNTQgNTUgNjYKNDMgOQogMiAyIDAKIDU2IDY1IDY0IDUwCjUzIDQKIDIgMSAxCiA2MyA2NCA1MSAxOQ=="
"OpCodesForDerivatives_light"
"MAo="
"ScopeBlocks_light"
"MA=="
"source"
"I2xpbmUgMSAiL2F0b21vL3BpcGVsaW5lL3Rvb2xzL3NoYWRlcnMvZGVsaWdodC9zcmMvc3BvdExpZ2h0U2hhcGUxLnNsIgpsaWdodCBzcG90TGlnaHRTaGFwZTEoCglzdHJpbmcgc2hhZG93bWFwbmFtZSA9ICIiOwoJZmxvYXQgc2hhZG93Qmx1ciA9IDA7CglmbG9hdCBzaGFkb3dTYW1wbGVzID0gMTY7CglmbG9hdCBfX25vbnNwZWN1bGFyID0gMDsKCWZsb2F0IF9fbm9uZGlmZnVzZSA9IDA7CglzdHJpbmcgX19jYXRlZ29yeSA9ICIiOwoJZmxvYXQgaXNrZXlsaWdodCA9IDA7CglzdHJpbmcgcmF5VHJhY2VTaGFkb3dTdWJzZXQgPSAiIjsKCglvdXRwdXQgdmFyeWluZyBmbG9hdCBfXzNkZm1fc2hhZG93aW5nID0gMDsKCW91dHB1dCB2YXJ5aW5nIGNvbG9yIF9fM2RmbV91bnNoYWRvd2VkX2NsID0gMDsKKQp7CgoKCWZsb2F0IHNzID0gczsKCWZsb2F0IHR0ID0gMSAtIHQ7CgoKCglmbG9hdCBmbG9hdER1bW15ID0gMC4wOwoJZmxvYXQgZmxvYXQyRHVtbXlbMl0gPSB7MC4wLCAwLjB9OwoJY29sb3IgY29sb3JEdW1teSA9IGNvbG9yKDAsMCwwKTsKCW1hdHJpeCBtYXRyaXhEdW1teSA9IDE7Cglub3JtYWwgbm9ybWFsRHVtbXkgPSBub3JtYWwoMCwwLDApOwoJcG9pbnQgcG9pbnREdW1teSA9IHBvaW50KDAsMCwwKTsKCXZlY3RvciB2ZWN0b3JEdW1teSA9IHZlY3RvcigwLDAsMCk7CglzdHJpbmcgc3RyaW5nRHVtbXk7CgoKCWNvbG9yIF9fdHJhbnNwYXJlbmN5ID0gMTsKCgoKI2xpbmUgMSAiL2F0b21vL2FwcHMvbGludXgveDg2XzY0L2RlbGlnaHQvMTAuMC4xNDgvbWF5YS9yc2wvL3Nwb3RMaWdodC5oIgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2xpbmUgMSAiL2F0b21vL2FwcHMvbGludXgveDg2XzY0L2RlbGlnaHQvMTAuMC4xNDgvbWF5YS9yc2wvL2xpZ2h0X3V0aWxzLmgiCgoKCgoKCgojbGluZSAxICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vdXRpbHMuaCIKCgoKCgoKCgoKCgojbGluZSAxOCAiL2F0b21vL2FwcHMvbGludXgveDg2XzY0L2RlbGlnaHQvMTAuMC4xNDgvbWF5YS9yc2wvL3V0aWxzLmgiCmZsb2F0Cmx1bWluYW5jZSggY29sb3IgaV9jb2xvciApCnsKCXJldHVybgoJCTAuMyAqIGNvbXAoaV9jb2xvciwgMCkgKyAKCQkwLjU5ICogY29tcChpX2NvbG9yLCAxKSArIAoJCTAuMTEgKiBjb21wKGlfY29sb3IsIDIpOwp9CgoKZmxvYXQgQ0lFbHVtaW5hbmNlKGNvbG9yIGMpCnsKCXJldHVybgoJICAgICAgY29tcChjLCAwKSAqIDAuMjEyNjcxCgkgICAgKyBjb21wKGMsIDEpICogMC43MTUxNjAKCSAgICArIGNvbXAoYywgMikgKiAwLjA3MjE2OTsKfQoKCmZsb2F0IHNxKGZsb2F0IHgpCnsKCXJldHVybiB4ICogeDsKfQoKY29sb3IKY2FicyggY29sb3IgaV9jb2xvciApCnsKCXJldHVybiBjb2xvcigKCQlhYnMoY29tcChpX2NvbG9yLCAwKSksIGFicyhjb21wKGlfY29sb3IsMSkpLCBhYnMoY29tcChpX2NvbG9yLDIpKSApOwp9CgoKZmxvYXQgZmlsdGVyZWRwdWxzZSAoZmxvYXQgZWRnZTAsIGVkZ2UxLCB4LCBkeCkKewogICAgZmxvYXQgeDAgPSB4IC0gZHgvMjsKICAgIGZsb2F0IHgxID0geDAgKyBkeDsKICAgIHJldHVybiBtYXggKDAsIChtaW4oeDEsZWRnZTEpLW1heCh4MCxlZGdlMCkpIC8gZHgpOwp9CgoKZmxvYXQgZmlsdGVyZWRwdWxzZXRyYWluIChmbG9hdCBlZGdlLCBwZXJpb2QsIHgsIGR4KQp7CgogICAgZmxvYXQgdyA9IGR4L3BlcmlvZDsKICAgIGZsb2F0IHgwID0geC9wZXJpb2QgLSB3LzI7CiAgICBmbG9hdCB4MSA9IHgwK3c7CiAgICBmbG9hdCBuZWRnZSA9IGVkZ2UgLyBwZXJpb2Q7CgoKICAgIGZsb2F0IGludGVncmFsIChmbG9hdCB0KSB7IAogICAgICAgIGV4dGVybiBmbG9hdCBuZWRnZTsKICAgICAgICByZXR1cm4gKCgxLW5lZGdlKSpmbG9vcih0KSArIG1heCgwLHQtZmxvb3IodCktbmVkZ2UpKTsKICAgIH0KCglmbG9hdCByZXN1bHQ7CglpZiggeDAgPT0geDEgKQoJewoKCQlyZXN1bHQgPSAoeDAgLSBmbG9vcih4MCkgPCBuZWRnZSkgPyAwIDogMTsKCX0KCWVsc2UKCXsKICAgIAlyZXN1bHQgPSAoaW50ZWdyYWwoeDEpIC0gaW50ZWdyYWwoeDApKSAvIHc7CgoKCgoKCiNsaW5lIDg3ICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vdXRpbHMuaCIKCQlmbG9hdCBleHRpbmN0ID0gc21vb3Roc3RlcCggMC40LCAwLjUsIHcgKTsKCQlyZXN1bHQgPSByZXN1bHQgKyBleHRpbmN0ICogKDEgLSBuZWRnZSAtIHJlc3VsdCk7Cgl9CgoJcmV0dXJuIHJlc3VsdDsKfQoKCgoKI2xpbmUgOTcgIi9hdG9tby9hcHBzL2xpbnV4L3g4Nl82NC9kZWxpZ2h0LzEwLjAuMTQ4L21heWEvcnNsLy91dGlscy5oIgpmbG9hdCBiaWFzKGZsb2F0IGIsIHgpCnsKICAgIHJldHVybiBwb3coeCwgbG9nKGIpLy0wLjY5MzE0NzE4MDU1OTk0NSk7Cn0KCnZvaWQKY29sb3JCYWxhbmNlKAoJb3V0cHV0IGNvbG9yIGlvX291dENvbG9yOwoJb3V0cHV0IGZsb2F0IGlvX291dEFscGhhOwoJdW5pZm9ybSBmbG9hdCBpX2FscGhhSXNMdW1pbmFuY2U7CglmbG9hdCBpX2FscGhhR2FpbjsKCWZsb2F0IGlfYWxwaGFPZmZzZXQ7Cgljb2xvciBpX2NvbG9yR2FpbjsKCWNvbG9yIGlfY29sb3JPZmZzZXQ7Cgl1bmlmb3JtIGZsb2F0IGlfaW52ZXJ0OyApCnsKCWlmKGlfaW52ZXJ0ICE9IDAuMCkKCXsKCQlpb19vdXRDb2xvciA9IDEgLSBpb19vdXRDb2xvcjsKCQlpb19vdXRBbHBoYSA9IDEgLSBpb19vdXRBbHBoYTsKCX0KCglpZihpX2FscGhhSXNMdW1pbmFuY2UgIT0gMC4wKQoJewoJCWlvX291dEFscGhhID0gbHVtaW5hbmNlKCBpb19vdXRDb2xvciApOwoJfQoKCWlvX291dENvbG9yICo9IGlfY29sb3JHYWluOwoJaW9fb3V0Q29sb3IgKz0gaV9jb2xvck9mZnNldDsKCglpb19vdXRBbHBoYSAqPSBpX2FscGhhR2FpbjsKCWlvX291dEFscGhhICs9IGlfYWxwaGFPZmZzZXQ7Cn0JCgoKCiNsaW5lIDEwICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vbGlnaHRfdXRpbHMuaCIKCmZsb2F0IHJlY2VpdmVfc2hhZG93cygpCnsKCXVuaWZvcm0gZmxvYXQgcmVjZWl2ZV9zaGFkID0gMTsKCWF0dHJpYnV0ZSggInVzZXI6ZGVsaWdodF9yZWNlaXZlX3NoYWRvd3MiLCByZWNlaXZlX3NoYWQgKTsKCXJldHVybiByZWNlaXZlX3NoYWQ7Cn0KCmNvbG9yIGNvbXB1dGVMaWdodENvbG9yKAoJY29sb3IgaV9jb2xvcjsKCWNvbG9yIGlfc2hhZG93Q29sb3I7Cgl1bmlmb3JtIHN0cmluZyBpX3NoYWRvd21hcE5hbWU7Cgl1bmlmb3JtIGZsb2F0IGlfc2hhZG93Qmx1cjsKCXVuaWZvcm0gZmxvYXQgaV9zaGFkb3dTYW1wbGVzOwoJdW5pZm9ybSBmbG9hdCBpX2RtYXBGaWx0ZXJTaXplOwoJdW5pZm9ybSBmbG9hdCBpX2RtYXBCaWFzOwoJKQp7CglleHRlcm4gcG9pbnQgUHM7CgoJY29sb3IgbGNvbG9yID0gaV9jb2xvcjsKCglpZiggaV9zaGFkb3dtYXBOYW1lICE9ICIiICYmIDEgPT0gcmVjZWl2ZV9zaGFkb3dzKCkgKQoJewoJCWNvbG9yIENzaGFkOwoKCQl1bmlmb3JtIGZsb2F0IGZpbHRlcndpZHRoID0gaV9kbWFwRmlsdGVyU2l6ZTsKCQl1bmlmb3JtIGZsb2F0IHNhbXBsZXMgPSBpX3NoYWRvd1NhbXBsZXM7CgoJCWlmKCBpX2RtYXBGaWx0ZXJTaXplID4gMSApCgkJewoJCQl1bmlmb3JtIGZsb2F0IHNoYWRpbmdyYXRlID0gMTsKCQkJYXR0cmlidXRlKCJTaGFkaW5nUmF0ZSIsIHNoYWRpbmdyYXRlKTsKCgkJCWZpbHRlcndpZHRoID0gMi41ICogaV9kbWFwRmlsdGVyU2l6ZSAvIHNxcnQoc2hhZGluZ3JhdGUpOwoJCQlpZiggZmlsdGVyd2lkdGggPCAxICkKCQkJewoJCQkJZmlsdGVyd2lkdGggPSAxOwoJCQl9CgoJCQlpZiggaV9kbWFwRmlsdGVyU2l6ZSA+IDIgKQoJCQl7CgkJCQlzYW1wbGVzICo9IDIgKyBpX2RtYXBGaWx0ZXJTaXplIC8gMTA7CgkJCX0KCQl9CgoJCWlmKCBpX2RtYXBCaWFzID09IDApCgkJewoJCQlDc2hhZCA9IHNoYWRvdygKCQkJCWlfc2hhZG93bWFwTmFtZSwgUHMsCgkJCQkiYmx1ciIsIGlfc2hhZG93Qmx1ciwKCQkJCSJ3aWR0aCIsIGZpbHRlcndpZHRoLAoJCQkJInNhbXBsZXMiLCBzYW1wbGVzICk7CgkJfQoJCWVsc2UKCQl7CgkJCUNzaGFkID0gc2hhZG93KAoJCQkJaV9zaGFkb3dtYXBOYW1lLCBQcywKCQkJCSJiaWFzIiwgaV9kbWFwQmlhcywKCQkJCSJibHVyIiwgaV9zaGFkb3dCbHVyLAoJCQkJIndpZHRoIiwgZmlsdGVyd2lkdGgsCgkJCQkic2FtcGxlcyIsIHNhbXBsZXMgKTsKCQl9CgogICAgICAgIGV4dGVybiBmbG9hdCBfXzNkZm1fc2hhZG93aW5nOwogICAgICAgIF9fM2RmbV9zaGFkb3dpbmcgPSBsdW1pbmFuY2UoQ3NoYWQpOwoKCQlsY29sb3IgPSBtaXgoIGxjb2xvciwgaV9zaGFkb3dDb2xvciwgQ3NoYWQgKTsKCX0KCglyZXR1cm4gbGNvbG9yOwp9CgoKCgoKCgoKCiNsaW5lIDkxICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vbGlnaHRfdXRpbHMuaCIKY29sb3IgY29tcHV0ZVJ0U2hhZG93aW5nKAoJY29sb3IgaV9DbDsKCWNvbG9yIGlfc2hhZG93Q29sb3I7Cgl1bmlmb3JtIGZsb2F0IGlfcnRTaGFkU2FtcGxlczsKCXVuaWZvcm0gZmxvYXQgaV9ydFNoYWRMaWdodElzRGlyZWN0aW9uYWw7Cgl1bmlmb3JtIGZsb2F0IGlfcnRTaGFkTGlnaHRSYWRpdXNPckFuZ2xlOwoJdW5pZm9ybSBzdHJpbmcgaV9ydFNoYWRTdWJzZXQ7CgkpCnsKCWV4dGVybiBwb2ludCBQczsKCgljb2xvciBsY29sb3IgPSBpX0NsOwoKCWlmKCBpX3J0U2hhZFNhbXBsZXMgIT0gMCAmJiAxID09IHJlY2VpdmVfc2hhZG93cygpICkKCXsKCQlwb2ludCB0bzsKCQlmbG9hdCBhbmdsZTsKCgkJaWYoIGlfcnRTaGFkTGlnaHRJc0RpcmVjdGlvbmFsID09IDEuMCApCgkJewoJCQl0byA9IFBzICsgKHZlY3RvciAic2hhZGVyIiAoMCwwLC0xKSkgKiAxZTEwOwoJCQlhbmdsZSA9IHJhZGlhbnMoaV9ydFNoYWRMaWdodFJhZGl1c09yQW5nbGUpOwoJCX0gCgkJZWxzZSAKCQl7CgkJCXRvID0gcG9pbnQgInNoYWRlciIgMDsKCQkJYW5nbGUgPSBhdGFuKCBpX3J0U2hhZExpZ2h0UmFkaXVzT3JBbmdsZSAvIGRpc3RhbmNlKCBQcywgdG8gKSApOwoJCX0KCgkJdW5pZm9ybSBmbG9hdCBpc19iYWtlcGFzcyA9IDA7CgkJb3B0aW9uKCJ1c2VyOm1heWFfYmFrZXBhc3MiLCBpc19iYWtlcGFzcyk7CgkJdW5pZm9ybSBmbG9hdCBzYW1wbGVzOwoJCWlmKGlzX2Jha2VwYXNzPT0xKQoJCXsKCgoKI2xpbmUgMTI4ICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vbGlnaHRfdXRpbHMuaCIKCQkJc2FtcGxlcyA9IGNlaWwoIGlfcnRTaGFkU2FtcGxlcy84ICk7CgkJfQoJCWVsc2UKCQl7CgkJCXNhbXBsZXMgPSBpX3J0U2hhZFNhbXBsZXM7CgkJfQoKCQljb2xvciBDdHJhbnNtaXNzaW9uID0gMC4wOwoKCgoKCgoKCgoJCUN0cmFuc21pc3Npb24gPQoJCQl0cmFuc21pc3Npb24oCgkJCQlQcywgdG8sCgkJCQkic2FtcGxlcyIsIHNhbXBsZXMsCgkJCQkic2FtcGxlY29uZSIsIGFuZ2xlLAoJCQkJImhpdHNpZGVzIiwgInJldmVyc2VkIiwKCQkJCSJzdWJzZXQiLCBpX3J0U2hhZFN1YnNldCk7CgoKCQljb2xvciBDc2hhZCA9IDEuMCAtIEN0cmFuc21pc3Npb247CgoJCWV4dGVybiBmbG9hdCBfXzNkZm1fc2hhZG93aW5nOwoJCV9fM2RmbV9zaGFkb3dpbmcgPSBsdW1pbmFuY2UoQ3NoYWQpOwoKCQlsY29sb3IgPSBtaXgoIGlfQ2wsIGlfc2hhZG93Q29sb3IsIENzaGFkICk7Cgl9CgoJcmV0dXJuIGxjb2xvcjsKfQoKCiNsaW5lIDUyICIvYXRvbW8vYXBwcy9saW51eC94ODZfNjQvZGVsaWdodC8xMC4wLjE0OC9tYXlhL3JzbC8vc3BvdExpZ2h0LmgiCgp2b2lkCnByZXBhcmVfbWF5YV9zcG90TGlnaHQoCgoKICBjb2xvciBpX2NvbG9yOwogIGZsb2F0IGlfaW50ZW5zaXR5OwogIGZsb2F0IGlfZGVjYXlSYXRlOwogIHVuaWZvcm0gZmxvYXQgaV9jb25lQW5nbGU7CiAgZmxvYXQgaV9wZW51bWJyYUFuZ2xlOwogIGZsb2F0IGlfZHJvcG9mZjsKCiAgdW5pZm9ybSBmbG9hdCBiYXJuRG9vcnM7CiAgZmxvYXQgaV9sZWZ0QmFybkRvb3I7CiAgZmxvYXQgaV9yaWdodEJhcm5Eb29yOwogIGZsb2F0IGlfdG9wQmFybkRvb3I7CiAgZmxvYXQgaV9ib3R0b21CYXJuRG9vcjsKCiAgY29sb3IgaV9zaGFkb3dDb2xvcjsKICB1bmlmb3JtIGZsb2F0IGlfZG1hcEZpbHRlclNpemU7CiAgdW5pZm9ybSBmbG9hdCBpX2RtYXBCaWFzOwoKICB1bmlmb3JtIGZsb2F0IGlfdXNlUmF5VHJhY2VTaGFkb3dzOwogIHVuaWZvcm0gZmxvYXQgaV9saWdodFJhZGl1czsKICB1bmlmb3JtIGZsb2F0IGlfc2hhZG93UmF5czsKCgoKICApCnsKCXVuaWZvcm0gcG9pbnQgZnJvbSA9IHBvaW50ICJzaGFkZXIiICgwLDAsMCk7CgoJZXh0ZXJuIHZlY3RvciBMOwoJZXh0ZXJuIGZsb2F0IHNzLCB0dDsKCglmbG9hdCBjb25lYW5nbGUgPSByYWRpYW5zKGlfY29uZUFuZ2xlKTsKCWZsb2F0IHBlbnVtYnJhYW5nbGUgPSByYWRpYW5zKGlfcGVudW1icmFBbmdsZSk7CglmbG9hdCBtYXhfYW5nbGUgPSBjb25lYW5nbGUgLyAyOwoJZmxvYXQgaW52X3Byb2pfbWF4X3JhdGlvID0gMSAvIHRhbiggbWF4X2FuZ2xlICk7CglpZiggcGVudW1icmFhbmdsZSA+IDAuMCApCgkJbWF4X2FuZ2xlICs9IHBlbnVtYnJhYW5nbGU7CgoKCXVuaWZvcm0gdmVjdG9yIEEgPSB2ZWN0b3IgInNoYWRlciIgKDAsMCwxKTsKCXVuaWZvcm0gZmxvYXQgQWxlbiA9IGxlbmd0aCggQSApOwoJQSAvPSBBbGVuOwoJdW5pZm9ybSB2ZWN0b3IgeGF4aXMgPSB2ZWN0b3IgInNoYWRlciIgKDAsMSwwKTsKCXVuaWZvcm0gdmVjdG9yIHlheGlzID0gdmVjdG9yICJzaGFkZXIiICgtMSwwLDApOwoJeGF4aXMgLz0geGF4aXMueGF4aXM7Cgl5YXhpcyAvPSB5YXhpcy55YXhpczsKCglpbGx1bWluYXRlKCBmcm9tLCBBLCBtYXhfYW5nbGUgKQoJewoJCWZsb2F0IGludl9MQSA9IEFsZW4gLyBMLkE7CgkJZmxvYXQgcmF0aW94ID0gTC54YXhpcyAqIGludl9MQTsKCQlmbG9hdCByYXRpb3kgPSBMLnlheGlzICogaW52X0xBOwoKCQl0dCA9IDEgLSAoKHJhdGlveCAqIGludl9wcm9qX21heF9yYXRpbykgKiAwLjUgKyAwLjUpOwoJCXNzID0gKHJhdGlveSAqIGludl9wcm9qX21heF9yYXRpbykgKiAwLjUgKyAwLjU7Cgl9Cn0KCnZvaWQKZW5kX21heWFfc3BvdExpZ2h0KAoKCgljb2xvciBpX2NvbG9yOwoJZmxvYXQgaV9pbnRlbnNpdHk7CglmbG9hdCBpX2RlY2F5UmF0ZTsKCXVuaWZvcm0gZmxvYXQgaV9jb25lQW5nbGU7CglmbG9hdCBpX3BlbnVtYnJhQW5nbGU7CglmbG9hdCBpX2Ryb3BvZmY7CgoJdW5pZm9ybSBmbG9hdCBiYXJuRG9vcnM7CglmbG9hdCBpX2xlZnRCYXJuRG9vcjsKCWZsb2F0IGlfcmlnaHRCYXJuRG9vcjsKCWZsb2F0IGlfdG9wQmFybkRvb3I7CglmbG9hdCBpX2JvdHRvbUJhcm5Eb29yOwoKCWNvbG9yIGlfc2hhZG93Q29sb3I7Cgl1bmlmb3JtIGZsb2F0IGlfZG1hcEZpbHRlclNpemU7Cgl1bmlmb3JtIGZsb2F0IGlfZG1hcEJpYXM7CgoJdW5pZm9ybSBmbG9hdCBpX3VzZVJheVRyYWNlU2hhZG93czsKCXVuaWZvcm0gZmxvYXQgaV9saWdodFJhZGl1czsKCXVuaWZvcm0gZmxvYXQgaV9zaGFkb3dSYXlzOwoKCgoJKQp7Cgl1bmlmb3JtIHBvaW50IGZyb20gPSBwb2ludCAic2hhZGVyIiAoMCwwLDApOwoKCWV4dGVybiBjb2xvciBDbDsKCWV4dGVybiB2ZWN0b3IgTDsKCWV4dGVybiBzdHJpbmcgc2hhZG93bWFwbmFtZTsKCWV4dGVybiBmbG9hdCBzaGFkb3dCbHVyOwoJZXh0ZXJuIGZsb2F0IHNoYWRvd1NhbXBsZXM7CglleHRlcm4gc3RyaW5nIHJheVRyYWNlU2hhZG93U3Vic2V0OwoKCWZsb2F0IGNvbmVhbmdsZSA9IHJhZGlhbnMoaV9jb25lQW5nbGUpOwoJZmxvYXQgcGVudW1icmFhbmdsZSA9IHJhZGlhbnMoaV9wZW51bWJyYUFuZ2xlKTsKCWZsb2F0IGxlZnRCYXJuRG9vciA9IHJhZGlhbnMoaV9sZWZ0QmFybkRvb3IpOwoJZmxvYXQgcmlnaHRCYXJuRG9vciA9IHJhZGlhbnMoaV9yaWdodEJhcm5Eb29yKTsKCWZsb2F0IHRvcEJhcm5Eb29yID0gcmFkaWFucyhpX3RvcEJhcm5Eb29yKTsKCWZsb2F0IGJvdHRvbUJhcm5Eb29yID0gcmFkaWFucyhpX2JvdHRvbUJhcm5Eb29yKTsKCgl1bmlmb3JtIHZlY3RvciBBID0gbm9ybWFsaXplKCB2ZWN0b3IgInNoYWRlciIgKDAsMCwxKSApOwoJdW5pZm9ybSB2ZWN0b3IgeGF4aXMgPSBub3JtYWxpemUoIHZlY3RvciAic2hhZGVyIiAoMCwxLDApICk7Cgl1bmlmb3JtIHZlY3RvciB5YXhpcyA9IG5vcm1hbGl6ZSggdmVjdG9yICJzaGFkZXIiICgtMSwwLDApICk7Cgl1bmlmb3JtIGZsb2F0IGNvc2xpbWl0ID0gY29zKGNvbmVhbmdsZSAvIDIpOwoJdW5pZm9ybSBmbG9hdCBjb3NwZW4gPSBjb3MoKGNvbmVhbmdsZSAvIDIpICsgcGVudW1icmFhbmdsZSk7Cgl1bmlmb3JtIGZsb2F0IGxvdyA9IG1pbihjb3NwZW4sIGNvc2xpbWl0KTsKCXVuaWZvcm0gZmxvYXQgaGlnaCA9IG1heChjb3NwZW4sIGNvc2xpbWl0KTsKCXVuaWZvcm0gZmxvYXQgbWF4ID0gc2luKChjb25lYW5nbGUgLyAyKSArIHBlbnVtYnJhYW5nbGUpOyAKCglmbG9hdCBtYXhfYW5nbGUgPSBjb25lYW5nbGUgLyAyOwoJaWYoIHBlbnVtYnJhYW5nbGUgPiAwLjAgKQoJCW1heF9hbmdsZSArPSBwZW51bWJyYWFuZ2xlOwoKCWlsbHVtaW5hdGUoIGZyb20sIEEsIG1heF9hbmdsZSApCgl7CgkJZmxvYXQgZGlzdGFuY2Vfc3F1YXJlZCA9IEwuTDsKCQlmbG9hdCBkaXN0YW5jZSA9IHNxcnQoIGRpc3RhbmNlX3NxdWFyZWQgKTsKCQlmbG9hdCBjb3NhbmdsZSA9IEwuQSAvIGRpc3RhbmNlOwoKCQlmbG9hdCBhdHRlbiA9IDEuMDsKCgkJaWYoIGlfZGVjYXlSYXRlID09IDAuMCApCgkJCSAgOwoJCWVsc2UgaWYoIGlfZGVjYXlSYXRlID09IDIuMCApCgkJCWF0dGVuIC89IGRpc3RhbmNlX3NxdWFyZWQ7CgkJZWxzZSBpZiggaV9kZWNheVJhdGUgPT0gMS4wICkKCQkJYXR0ZW4gLz0gZGlzdGFuY2U7CgkJZWxzZQoJCQlhdHRlbiAvPSBwb3coZGlzdGFuY2UsIGlfZGVjYXlSYXRlKTsKCgkJaWYgKGlfZHJvcG9mZiA+IDApIAoJCQlhdHRlbiAqPSBjbGFtcChwb3coY29zYW5nbGUsIDEgKyBpX2Ryb3BvZmYpLDAsMSk7CgoJCWlmIChiYXJuRG9vcnMgPiAwKQoJCXsKCQkJZmxvYXQgYW5nbGV4ID0gYXRhbihMLnhheGlzLCBMLkEpOwoJCQlmbG9hdCBhbmdsZXkgPSBhdGFuKEwueWF4aXMsIEwuQSk7CgoJCQlhdHRlbiAqPSBzbW9vdGhzdGVwKG1pbigtYm90dG9tQmFybkRvb3IsIC1ib3R0b21CYXJuRG9vciAtIHBlbnVtYnJhYW5nbGUpLAoJCQkJCW1heCgtYm90dG9tQmFybkRvb3IsIC1ib3R0b21CYXJuRG9vciAtIHBlbnVtYnJhYW5nbGUpLCBhbmdsZXgpICogCgkJCQkoMSAtIHNtb290aHN0ZXAobWluKHRvcEJhcm5Eb29yLCB0b3BCYXJuRG9vciArIHBlbnVtYnJhYW5nbGUpLCAKCQkJCQkJCQltYXgodG9wQmFybkRvb3IsIHRvcEJhcm5Eb29yICsgcGVudW1icmFhbmdsZSksIGFuZ2xleCkpOwoJCQlhdHRlbiAqPSBzbW9vdGhzdGVwKG1pbigtcmlnaHRCYXJuRG9vciwgLXJpZ2h0QmFybkRvb3IgLSBwZW51bWJyYWFuZ2xlKSwKCQkJCQltYXgoLXJpZ2h0QmFybkRvb3IsIC1yaWdodEJhcm5Eb29yIC0gcGVudW1icmFhbmdsZSksIGFuZ2xleSkgKiAKCQkJCSgxIC0gc21vb3Roc3RlcChtaW4obGVmdEJhcm5Eb29yLCBsZWZ0QmFybkRvb3IgKyBwZW51bWJyYWFuZ2xlKSwgCgkJCQkJCQkJbWF4KGxlZnRCYXJuRG9vciwgbGVmdEJhcm5Eb29yICsgcGVudW1icmFhbmdsZSksIGFuZ2xleSkpOwoJCX0KCgkJYXR0ZW4gKj0gc21vb3Roc3RlcChsb3csIGhpZ2gsIGNvc2FuZ2xlKTsKCgkJY29sb3IgbGNvbG9yID0gY29tcHV0ZUxpZ2h0Q29sb3IoCgkJCWlfY29sb3IsIGlfc2hhZG93Q29sb3IsIHNoYWRvd21hcG5hbWUsCgkJCXNoYWRvd0JsdXIsIHNoYWRvd1NhbXBsZXMsIGlfZG1hcEZpbHRlclNpemUsIGlfZG1hcEJpYXMgKTsKCgkJZXh0ZXJuIGNvbG9yIF9fM2RmbV91bnNoYWRvd2VkX2NsOwoJCV9fM2RmbV91bnNoYWRvd2VkX2NsID0gYXR0ZW4gKiBpX2ludGVuc2l0eSAqIGlfY29sb3I7CgoJCUNsID0gYXR0ZW4gKiBpX2ludGVuc2l0eSAqIGxjb2xvcjsKCgkJQ2wgPSBjb21wdXRlUnRTaGFkb3dpbmcoCgkJCUNsLCAKCQkJaV9zaGFkb3dDb2xvciwKCQkJaV91c2VSYXlUcmFjZVNoYWRvd3MgKiBpX3NoYWRvd1JheXMsIAoJCQkwLCAKCQkJaV9saWdodFJhZGl1cywKCQkJcmF5VHJhY2VTaGFkb3dTdWJzZXQgKTsKCX0KfQoKCgojbGluZSAzNyAiL2F0b21vL3BpcGVsaW5lL3Rvb2xzL3NoYWRlcnMvZGVsaWdodC9zcmMvc3BvdExpZ2h0U2hhcGUxLnNsIgoKCgoKCgoJewoJCXByZXBhcmVfbWF5YV9zcG90TGlnaHQoCgkJCWNvbG9yKDEsIDEsIDEpLCAgCgkJCTEsICAKCQkJMCwgIAoJCQk0MCwgIAoJCQkwLCAgCgkJCTAsICAKCQkJMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQljb2xvcigwLCAwLCAwKSwgIAoJCQkxLCAgCgkJCTAuMDAxMDAwMDAwMDQ3LCAgCgkJCTAsICAKCQkJMCwgIAoJCQkxICAKCQkJKTsKCgoKCQllbmRfbWF5YV9zcG90TGlnaHQoCgkJCWNvbG9yKDEsIDEsIDEpLCAgCgkJCTEsICAKCQkJMCwgIAoJCQk0MCwgIAoJCQkwLCAgCgkJCTAsICAKCQkJMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQkyMCwgIAoJCQljb2xvcigwLCAwLCAwKSwgIAoJCQkxLCAgCgkJCTAuMDAxMDAwMDAwMDQ3LCAgCgkJCTAsICAKCQkJMCwgIAoJCQkxICAKCQkJKTsKCgl9CgoKCn0KCgoK"
%comment-user 7 121
0

